I"‡“
<h1 id="homework-data-visualization">Homework Data Visualization</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="c1"># please import as much as you need
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># read your data
</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'telco_customer.csv'</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>customerID</th>
      <th>gender</th>
      <th>SeniorCitizen</th>
      <th>Partner</th>
      <th>Dependents</th>
      <th>tenure</th>
      <th>PhoneService</th>
      <th>MultipleLines</th>
      <th>InternetService</th>
      <th>OnlineSecurity</th>
      <th>...</th>
      <th>DeviceProtection</th>
      <th>TechSupport</th>
      <th>StreamingTV</th>
      <th>StreamingMovies</th>
      <th>Contract</th>
      <th>PaperlessBilling</th>
      <th>PaymentMethod</th>
      <th>MonthlyCharges</th>
      <th>TotalCharges</th>
      <th>Churn</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7590-VHVEG</td>
      <td>Female</td>
      <td>0</td>
      <td>Yes</td>
      <td>No</td>
      <td>1</td>
      <td>No</td>
      <td>No phone service</td>
      <td>DSL</td>
      <td>No</td>
      <td>...</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>Month-to-month</td>
      <td>Yes</td>
      <td>Electronic check</td>
      <td>29.85</td>
      <td>29.85</td>
      <td>No</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5575-GNVDE</td>
      <td>Male</td>
      <td>0</td>
      <td>No</td>
      <td>No</td>
      <td>34</td>
      <td>Yes</td>
      <td>No</td>
      <td>DSL</td>
      <td>Yes</td>
      <td>...</td>
      <td>Yes</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>One year</td>
      <td>No</td>
      <td>Mailed check</td>
      <td>56.95</td>
      <td>1889.5</td>
      <td>No</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3668-QPYBK</td>
      <td>Male</td>
      <td>0</td>
      <td>No</td>
      <td>No</td>
      <td>2</td>
      <td>Yes</td>
      <td>No</td>
      <td>DSL</td>
      <td>Yes</td>
      <td>...</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>Month-to-month</td>
      <td>Yes</td>
      <td>Mailed check</td>
      <td>53.85</td>
      <td>108.15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7795-CFOCW</td>
      <td>Male</td>
      <td>0</td>
      <td>No</td>
      <td>No</td>
      <td>45</td>
      <td>No</td>
      <td>No phone service</td>
      <td>DSL</td>
      <td>Yes</td>
      <td>...</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>No</td>
      <td>No</td>
      <td>One year</td>
      <td>No</td>
      <td>Bank transfer (automatic)</td>
      <td>42.30</td>
      <td>1840.75</td>
      <td>No</td>
    </tr>
    <tr>
      <th>4</th>
      <td>9237-HQITU</td>
      <td>Female</td>
      <td>0</td>
      <td>No</td>
      <td>No</td>
      <td>2</td>
      <td>Yes</td>
      <td>No</td>
      <td>Fiber optic</td>
      <td>No</td>
      <td>...</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>No</td>
      <td>Month-to-month</td>
      <td>Yes</td>
      <td>Electronic check</td>
      <td>70.70</td>
      <td>151.65</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>
<p>5 rows Ã— 21 columns</p>
</div>

<h1 id="normal">Normal</h1>

<h2 id="dalam-rata-rata-payment-method-mana-yang-memiliki-monthly-charge-terbesar-per-customernya">Dalam rata-rata, payment method mana yang memiliki monthly charge terbesar per customernya?</h2>

<p>Hint: Gunakan groupby payment method terhadap monthly charge dengan aggregate function rata-rata</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># filter data
</span><span class="n">df_2</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'PaymentMethod'</span><span class="p">)[</span><span class="s">'MonthlyCharges'</span><span class="p">].</span><span class="n">mean</span><span class="p">().</span><span class="n">reset_index</span><span class="p">()</span>
<span class="c1">#df_2.head()
</span>
<span class="c1"># create a plot
</span><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="p">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s">'PaymentMethod'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span> <span class="s">'MonthlyCharges'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_2</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="output_5_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa payment method Electronic check memiliki rata-rata monthly charges terbesar daripada payment method lainnya yaitu sebesar 76.25.</p>

<h2 id="bagaimana-jumlah-customer-dilihat-dari-tenure-group">Bagaimana jumlah customer dilihat dari tenure group?</h2>

<p>Tenure group:</p>
<ul>
  <li>low_tenure: User dengan tenure &lt; 21 hari</li>
  <li>medium_tenure: User dengan tenure 21 - 40 hari</li>
  <li>high_tenure: User dengan tenure &gt; 40 hari</li>
</ul>

<p>Hint:</p>
<ul>
  <li>Memotong data integer menjadi group categorical dapat menggunakan beberapa macam cara, contohnya dengan numpy.where atau pandas.cut</li>
  <li>Mirip dengan plot pertama, namun ini menghitung jumlah unique users</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import numpy package
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># mengkategorikan data berdasarkan tenure
</span><span class="n">df_2</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_2</span><span class="p">[</span><span class="s">'tenure_group'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_2</span><span class="p">[</span><span class="s">'tenure'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">,</span> <span class="s">'High'</span><span class="p">,</span> 
                                             <span class="n">np</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_2</span><span class="p">[</span><span class="s">'tenure'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">21</span><span class="p">,</span> <span class="s">'Mid'</span><span class="p">,</span> <span class="s">'Low'</span><span class="p">))</span>

<span class="c1"># menghitung jumlah customer per kategori tenure
</span><span class="n">df_3</span> <span class="o">=</span> <span class="n">df_2</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'tenure_group'</span><span class="p">)[</span><span class="s">'customerID'</span><span class="p">].</span><span class="n">count</span><span class="p">().</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1">#membuat visualisasi
</span><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="p">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s">'tenure_group'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span> <span class="s">'customerID'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_3</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="output_8_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa jumlah customer tertinggi pada tenure group Low. Sedangkan jumlah customer pada tenure group High tidak berbeda jauh dengan Low, tetapi jumlah customer terendah ada pada tenure grup Mid.</p>

<h2 id="apakah-kebanyakan-dari-senior-citizen-berlangganan-phoneservice">Apakah kebanyakan dari Senior Citizen berlangganan PhoneService?</h2>

<p>Hint:</p>
<ul>
  <li>Dapat menggunakan feature/input parameter hue pada seaborn</li>
  <li>Dalam menghitung jumlah unique customer, jangan lupa perhatikan angka rasio, tidak hanya angka absolutnya</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># filter data
</span><span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'SeniorCitizen'</span><span class="p">,</span><span class="s">'PhoneService'</span><span class="p">])[</span><span class="s">'customerID'</span><span class="p">].</span><span class="n">count</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SeniorCitizen  PhoneService
0              No               578
               Yes             5323
1              No               104
               Yes             1038
Name: customerID, dtype: int64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a plot
</span><span class="n">sns</span><span class="p">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'SeniorCitizen'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">'PhoneService'</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="output_13_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa customer yang bukan senior citizen kebanyakan berlangganan PhoneService, tetapi jika dilihat dari rasionya, customer yang senior citizen maupun bukan memiliki rasio yang hampir sama dalam berlangganan phone service.</p>

<h2 id="bagaimana-distribusi-dari-totalcharge">Bagaimana Distribusi dari TotalCharge?</h2>

<p>Hint:</p>
<ul>
  <li>Ubah datatype TotalCharge dari object ke int atau float</li>
  <li>Buat distribusi plot!</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#mengubah tipe data TotalCharge menjadi integer
</span><span class="n">df</span><span class="p">[</span><span class="s">"TotalCharges"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_numeric</span><span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="s">"TotalCharges"</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">"coerce"</span><span class="p">)</span>
<span class="c1">#untuk mengatasi NA
</span><span class="n">df</span><span class="p">[</span><span class="s">"TotalCharges"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">"TotalCharges"</span><span class="p">].</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># mengubah type data object menjadi int dan menyimpannya ke variabel total_charges
</span><span class="n">total_charges</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">"TotalCharges"</span><span class="p">].</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1">#membuat distribution plot
</span><span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">total_charges</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="output_17_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa distribusi data pada kolom TotalCharges memiliki distribusi positively skew. Nilai rata-ratanya lebih besar daripada median, dikarenakan terdapatnya data-data TotalCharges yang besar/outlier (letaknya disebelah kanan dari modus dan median). 
Selain itu, dari grafik diatas dapat diketahui datanya lumayan banyak memiliki nilai 0, dimungkinkan karena mengisi data NaN dengan 0 pada kode diatas. Data TotalCharges semua bernilai positif dengan banyak sebaran data pada rentang 0-2000, tetapi ada yang memiliki nilai yang sangat besar hingga 10000.</p>

<h1 id="intermediate">Intermediate</h1>

<h2 id="apakah-customer-yang-memiliki-monthly-charges-yang-tinggi-cenderung-churn">Apakah customer yang memiliki monthly charges yang tinggi cenderung churn?</h2>

<p>Hint: dapat ditunjukan melalui distribusi data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># filter data berdasarkan Churn
</span><span class="n">churn_yes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'Churn'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'Yes'</span><span class="p">]</span>
<span class="n">churn_no</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'Churn'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'No'</span><span class="p">]</span>

<span class="c1">#membuat grafik
</span><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">churn_yes</span><span class="p">[</span><span class="s">'MonthlyCharges'</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s">'yes'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'#582630'</span><span class="p">)</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">churn_no</span><span class="p">[</span><span class="s">'MonthlyCharges'</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s">'no'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'#96E29B'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Monthly Charges Based On Churn'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="output_22_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa customer yang memiliki MonthlyCharges tinggi, lebih banyak yang churn daripada yang tidak churn. Selain itu, pada customer yang MonthlyCharges nya lebih rendah, cenderung lebih banyak yang tidak churn daripada yang churn.</p>

<h2 id="bagaimana-pengaruh-memiliki-partner--dependents-terhadap-tingkat-churn-customer">Bagaimana pengaruh memiliki partner &amp; dependents terhadap tingkat churn customer?</h2>

<p>Hint: concat partner dan dependents, gunakan parameter â€˜hueâ€™ pada seaborn untuk mempermudah</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># concat partner dan dependants kolom pada dataframe
</span><span class="n">df</span><span class="p">[</span><span class="s">'partner_dependents'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'Partner'</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s">'Dependents'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s">'partner_dependents'</span><span class="p">]</span>

<span class="c1"># membuat grafik
</span><span class="n">sns</span><span class="p">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'partner_dependents'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">'Churn'</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="output_25_0.png" alt="png" /></p>

<p>Jadi, dari plot di atas, dapat disimpulkan bahwa saat customer memiliki partner &amp; dependents (YesYes), akan memiliki tingkat churn paling rendah (berdasarkan rasio churn yes dan no) dibandingkan dengan kombinasi pemilikan partner &amp; dependents yang lain.</p>

<h1 id="soal-hard">Soal Hard</h1>

<h2 id="buatlah-satu-insight-dari-data-telco-customer-dan-sertakan-storyline-pada-visualisasi-tersebut-dengan-hanya-memanfaatkan-atribut-paymentmethod-customerid-dan-churn">Buatlah satu insight dari data telco customer, dan sertakan storyline pada visualisasi tersebut! dengan hanya memanfaatkan atribut PaymentMethod, CustomerID, dan Churn!</h2>

<h4 id="customer-churn-rate-based-on-payment-method">Customer Churn Rate based on Payment Method</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># filter data
</span><span class="n">data_payment</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'PaymentMethod'</span><span class="p">,</span><span class="s">'Churn'</span><span class="p">]).</span><span class="n">agg</span><span class="p">({</span><span class="s">'customerID'</span> <span class="p">:</span> <span class="p">[</span><span class="s">'count'</span><span class="p">]}).</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">data_payment</span><span class="p">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'PaymentMethod'</span><span class="p">,</span><span class="s">'Churn'</span><span class="p">,</span><span class="s">'Customers'</span><span class="p">]</span>
<span class="n">data_payment</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PaymentMethod</th>
      <th>Churn</th>
      <th>Customers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bank transfer (automatic)</td>
      <td>No</td>
      <td>1286</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bank transfer (automatic)</td>
      <td>Yes</td>
      <td>258</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Credit card (automatic)</td>
      <td>No</td>
      <td>1290</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Credit card (automatic)</td>
      <td>Yes</td>
      <td>232</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Electronic check</td>
      <td>No</td>
      <td>1294</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Electronic check</td>
      <td>Yes</td>
      <td>1071</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Mailed check</td>
      <td>No</td>
      <td>1304</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Mailed check</td>
      <td>Yes</td>
      <td>308</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_payment</span><span class="p">[</span><span class="s">'TotalCustomers'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_payment</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'PaymentMethod'</span><span class="p">])[</span><span class="s">'Customers'</span><span class="p">].</span><span class="n">transform</span><span class="p">(</span><span class="s">'sum'</span><span class="p">)</span>
<span class="n">data_payment</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PaymentMethod</th>
      <th>Churn</th>
      <th>Customers</th>
      <th>TotalCustomers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bank transfer (automatic)</td>
      <td>No</td>
      <td>1286</td>
      <td>1544</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bank transfer (automatic)</td>
      <td>Yes</td>
      <td>258</td>
      <td>1544</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Credit card (automatic)</td>
      <td>No</td>
      <td>1290</td>
      <td>1522</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Credit card (automatic)</td>
      <td>Yes</td>
      <td>232</td>
      <td>1522</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Electronic check</td>
      <td>No</td>
      <td>1294</td>
      <td>2365</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Electronic check</td>
      <td>Yes</td>
      <td>1071</td>
      <td>2365</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Mailed check</td>
      <td>No</td>
      <td>1304</td>
      <td>1612</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Mailed check</td>
      <td>Yes</td>
      <td>308</td>
      <td>1612</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_payment</span><span class="p">[</span><span class="s">'Percentage'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_payment</span><span class="p">[</span><span class="s">'Customers'</span><span class="p">]</span><span class="o">/</span><span class="n">data_payment</span><span class="p">[</span><span class="s">'TotalCustomers'</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span>
<span class="n">data_payment</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PaymentMethod</th>
      <th>Churn</th>
      <th>Customers</th>
      <th>TotalCustomers</th>
      <th>Percentage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bank transfer (automatic)</td>
      <td>No</td>
      <td>1286</td>
      <td>1544</td>
      <td>83.290155</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bank transfer (automatic)</td>
      <td>Yes</td>
      <td>258</td>
      <td>1544</td>
      <td>16.709845</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Credit card (automatic)</td>
      <td>No</td>
      <td>1290</td>
      <td>1522</td>
      <td>84.756899</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Credit card (automatic)</td>
      <td>Yes</td>
      <td>232</td>
      <td>1522</td>
      <td>15.243101</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Electronic check</td>
      <td>No</td>
      <td>1294</td>
      <td>2365</td>
      <td>54.714588</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Electronic check</td>
      <td>Yes</td>
      <td>1071</td>
      <td>2365</td>
      <td>45.285412</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Mailed check</td>
      <td>No</td>
      <td>1304</td>
      <td>1612</td>
      <td>80.893300</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Mailed check</td>
      <td>Yes</td>
      <td>308</td>
      <td>1612</td>
      <td>19.106700</td>
    </tr>
  </tbody>
</table>
</div>

<h4 id="create-plot">Create Plot</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="n">mpatches</span>

<span class="c1"># set the figure size
</span><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># from raw value to percentage
</span><span class="n">churn</span> <span class="o">=</span> <span class="n">data_payment</span><span class="p">[</span><span class="n">data_payment</span><span class="p">[</span><span class="s">'Churn'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'Yes'</span><span class="p">]</span>

<span class="c1"># bar chart 1 -&gt; top bars (group of total customer)
</span><span class="n">bar1</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'PaymentMethod'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'TotalCustomers'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data_payment</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'#eeddd3'</span><span class="p">)</span>

<span class="c1"># bar chart 2 -&gt; bottom bars (group of 'Churn=Yes')
</span><span class="n">bar2</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'PaymentMethod'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'Customers'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">churn</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'#9e2a2b'</span><span class="p">)</span>

<span class="c1"># add legend
</span><span class="n">top_bar</span> <span class="o">=</span> <span class="n">mpatches</span><span class="p">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">'#eeddd3'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Total Customers'</span><span class="p">)</span>
<span class="n">bottom_bar</span> <span class="o">=</span> <span class="n">mpatches</span><span class="p">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">'#9e2a2b'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Churn'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">top_bar</span><span class="p">,</span> <span class="n">bottom_bar</span><span class="p">])</span>

<span class="c1"># The signature bar
</span><span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">270</span><span class="p">,</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">' Â©HOMEWORK DATA VISUALIZATION: Firdha Maulidya S'</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span> 
               <span class="n">color</span> <span class="o">=</span> <span class="s">'#f0f0f0'</span><span class="p">,</span> <span class="n">backgroundcolor</span> <span class="o">=</span> <span class="s">'grey'</span><span class="p">)</span>

<span class="c1"># Generate a bolded horizontal line at y = 0
</span><span class="n">bar1</span><span class="p">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="p">.</span><span class="mi">7</span><span class="p">)</span>

<span class="c1"># Edit xlabel
</span><span class="n">bar1</span><span class="p">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Bank Transfer'</span><span class="p">,</span> <span class="s">'Credit Card'</span><span class="p">,</span> <span class="s">'Electronic Card'</span><span class="p">,</span> <span class="s">'Mailed Check'</span><span class="p">])</span>

<span class="c1"># Remove the label of the x-axis and y-axis
</span><span class="n">bar1</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="c1"># Adding a title and a subtitle
</span><span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2800</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"Telco Customer Churn Rate Based On Payment Method"</span><span class="p">,</span>
               <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">26</span><span class="p">,</span> <span class="n">weight</span> <span class="o">=</span> <span class="s">'bold'</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="p">.</span><span class="mi">75</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2650</span><span class="p">,</span>
               <span class="n">s</span> <span class="o">=</span> <span class="s">'Electronic card is the most widely used payment method by customers.'</span><span class="p">,</span>
              <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="p">.</span><span class="mi">85</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2520</span><span class="p">,</span>
               <span class="n">s</span> <span class="o">=</span> <span class="s">'However, the electronic card payment method has the highest churn rate of 45.3%.'</span><span class="p">,</span>
              <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="p">.</span><span class="mi">85</span><span class="p">)</span>

<span class="c1"># Add data point
</span><span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">260</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"15.2%"</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">275</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"16.7%"</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1100</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"45.3%"</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
<span class="n">bar1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">345</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"19.1%"</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Text(3, 345, '19.1%')
</code></pre></div></div>

<p><img src="output_34_1.png" alt="png" /></p>

:ET